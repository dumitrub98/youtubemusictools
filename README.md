
# Randomize YouTube Music Playlist

This script allows you to randomize the order of tracks in a YouTube Music playlist by removing all tracks and adding them back in a randomized order. It uses the `ytmusicapi` library to interact with YouTube Music.

---

## Prerequisites

Before you start, make sure you have:
- **Python 3** installed on your system (version 3.7+ recommended).
- `pip` or `pipx` installed for package management.
- Access to **YouTube Music** via a browser (you need your session cookies for authentication).

---

## 1. Installation Steps

### Step 1: Clone the repository
```bash
git clone https://github.com/dumitrub98/youtubeplaylistrandomizer.git
cd randomizer
```

### Step 2: Create a virtual environment (optional but recommended)
```bash
python3 -m venv venv
source venv/bin/activate
```

### Step 3: Install dependencies
Install the `ytmusicapi` library:
```bash
pip install ytmusicapi
```

---

## 2. Authentication Setup

To allow the script to interact with your YouTube Music account, you need to provide your session cookies manually:

### Step 1: Open YouTube Music
1. Open [https://music.youtube.com](https://music.youtube.com) in Firefox (or any other browser which allows to export headers in raw format).
2. Log in to your YouTube Music account.

### Step 2: Open Developer Tools
1. Press **F12** or **Ctrl+Shift+I** (Windows/Linux) or **Cmd+Opt+I** (macOS) to open Developer Tools.
2. Navigate to the **Network** tab.

### Step 3: Capture a Request
1. Refresh the page by pressing **F5**.
2. Look for a request named **browse** or **search** in the list.
3. Click on the request and select the **Headers** tab.

### Step 4: Copy Request Headers
1. Scroll to the section **Request Headers**.
2. Copy the full headers, including the `User-Agent`, `Cookie`, and other necessary fields in raw format.

### Step 5: Create `headers.txt`
1. Create a file named `headers.txt` in your project folder.
2. Paste the copied request headers in the following format:
   ```raw
    POST /youtubei/v1/browse?prettyPrint=false HTTP/3
    Host: music.youtube.com
    User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:134.0) Gecko/20100101 Firefox/134.0
    Accept: */*
    Accept-Language: en-US,en;q=0.5
    Accept-Encoding: gzip, deflate, br, zstd
    Content-Type: application/json
    Content-Length: 3228
    .....
   ```


### Step 6: Set current session for `ytmusicapi`
```bash
ytmusicapi browser < headers.txt
```

---

## 3. Running the Script

Once you have the authentication set up, you can run the script:

### Command Syntax:
```bash
python3 randomiser.py <playlist_id> <limit>
```

- `<playlist_id>`: The ID of the YouTube Music playlist (found in the playlist URL).
- `<limit>`: The maximum number of tracks to process (optional, default is `2000`).

### Example:
```bash
python3 randomiser.py "SD110d2d2-djh181d19d81h2d2" 1000
```

#### Output: 
```bash
Randomizing playlist 'My Songs' with 641 tracks.
Removing all tracks from the playlist in batches...
Removing batch 1/4 with 200 tracks...
Removing batch 2/4 with 200 tracks...
Removing batch 3/4 with 200 tracks...
Removing batch 4/4 with 41 tracks...
Adding shuffled tracks to the playlist...
Playlist 'My Songs' has been updated with a randomized order!
```

---

## 4. Important Notes

- The playlist must be created by **you**; public or autogenerated playlists cannot be modified.
- The authentication `browser.json` file contains session cookiesâ€”keep it secure to avoid unauthorized access.
- If you encounter rate limits from YouTube Music, try reducing the batch size in the script or adding a longer delay.

---

## Troubleshooting

- **"Cannot remove songs, because setVideoId is missing":**
  - Make sure you are using a playlist you created.
  - Ensure the authentication `browser.json` is valid.
  
- **"HTTP 401 Unauthorized":**
  - Your session may have expired. Re-export `cookies.txt` and regenerate `browser.json`.

---

## Contributing

Feel free to submit issues or contribute improvements to this project.


---

## Acknowledgements
Special thanks to the [ytmusicapi](https://github.com/sigma67/ytmusicapi) project for providing an excellent API for interacting with YouTube Music.